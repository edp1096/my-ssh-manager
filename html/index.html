<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>SSH Manager</title>
    <link rel="icon" href="data:,">

    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/host-list.css" />
    <link rel="stylesheet" href="/css/dialog.css" />
</head>

<body oncontextmenu="contextMenu(event); return false" onmousewheel="preventCtrlWheel(event)" onkeydown="preventKeys(event)">
    <button onclick="openHostEditDialog()">New Host</button>
    <button onclick="getHosts()">Refresh host list</button>

    <div id="hosts-data-container"></div>

    <dialog id="dialog-host-edit" onclose="saveHostData(event)"></dialog>
    <dialog id="dialog-notice"></dialog>

    <template id="hosts-data-template">
        <ul ondblclick="connectSSH(`$$_IDX_$$`, `new_window`)" onmousedown="return false">
            <li class="part-name">
                <span class="label">Name:</span> <span>$$_NAME_$$</span>
            </li>
            <li class="part-address">
                <span class="label">Address:</span> <span>$$_ADDRESS_$$:$$_PORT_$$</span>
            </li>
            <li>
                <button onclick="openHostEditDialog(`$$_IDX_$$`)">Edit</button>
                <button onclick="connectSSH(`$$_IDX_$$`, `new_window`)">Open new window</button>
                <button onclick="connectSSH(`$$_IDX_$$`)">Open new panel</button>
            </li>
        </ul>
    </template>

    <template id="dialog-host-edit-template">
        <h2>$$_TITLE_$$</h2>
        <form method="dialog">
            <input type="hidden" id="idx" value="" />
            <p>
                <label for="host-edit-name">Name:</label>
                <input type="text" id="host-edit-name" name="name" required autocomplete="off" />
            </p>
            <p>
                <label for="host-edit-address">Address:</label>
                <input id="host-edit-address" name="address" required autocomplete="off" placeholder="IP or domain" />
            </p>
            <p>
                <label for="host-edit-port">Port:</label>
                <input id="host-edit-port" type="number" name="port" autocomplete="off" placeholder="22 is default if empty" />
            </p>
            <p>
                <label for="host-edit-username">Username:</label>
                <input id="host-edit-username" name="username" required autocomplete="off" />
            </p>

            <hr />

            <p>
                <label for="use-password">Password</label><input onchange="setAuthType()" type="radio" id="use-password" name="auth-type" checked />
                <label for="use-private-key-file">Key file</label><input onchange="setAuthType()" type="radio" id="use-private-key-file" name="auth-type" />
                <label for="use-private-key-text">Key text</label><input onchange="setAuthType()" type="radio" id="use-private-key-text" name="auth-type" />
            </p>
            <p>
                <label for="host-edit-password">Password:</label>
                <input type="password" id="host-edit-password" name="password" required />
            </p>
            <p>
                <!-- Since security of chrome, cannot use real path -->
                <!-- <label for="host-edit-private-key-file-browse" class="file-upload">Key path:</label> -->
                <label for="host-edit-private-key-file" class="file-upload">Key path:</label>
                <!-- <span></span> -->
                <input type="text" id="host-edit-private-key-file" name="private-key-file" required />
                <!-- <input type="file" id="host-edit-private-key-file-browse" onchange="moveKeyFilePathText()" /> -->
            </p>
            <p>
                <label for="host-edit-private-key-text">Key text:</label>
                <textarea id="host-edit-private-key-text" name="private-key-text" required></textarea>
            </p>

            <p>
                <label for="host-edit-description">Description:</label>
                <textarea id="host-edit-description" name="description"></textarea>
            </p>

            <p>
                <button type="button" onclick="cancelHostEditDialog()">Cancel</button>
                <button value="confirm">Save</button>
            </p>
        </form>
    </template>

    <template id="dialog-notice-template">
        <div style="width: 15rem; height: 10rem;">
            <p>$$_MESSAGE_$$</p>
            <button onclick="closeNotice(event)">Close</button>
        </div>
    </template>
</body>

<script>"use strict"</script>
<script src="/js/consts.js"></script>
<script src="/js/ws.js"></script>
<script src="/js/input-events.js"></script>
<script src="/js/host-control.js"></script>
<script src="/js/scripts.js"></script>

</html>